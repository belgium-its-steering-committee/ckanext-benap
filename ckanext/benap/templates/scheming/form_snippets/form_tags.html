{% import 'macros/form.html' as form %}

{% call form.input(
    field.field_name,
    id='field-' + field.field_name,
    label=h.scheming_language_text(field.label),
    placeholder=h.scheming_language_text(field.form_placeholder),
    value=h.benap_tag_update_helper(data[field.field_name], h.get_translated_tags()),
    error=errors[field.field_name],
    classes=field.classes if 'classes' in field else ['control-medium'],
    attrs=dict({"class": "hide-control form-control"}, **(field.get('form_attrs', {}))),
    is_required=h.scheming_field_required(field)
    )
%}
    {%- set lang = h.lang() -%}
    {%- set english = 'en' -%}
  {%- set choices = h.get_translated_tags() -%}
  {%- if field.get('sorted_choices') -%}
    {%- set choices = choices|sort(case_sensitive=false, attribute=1) -%}
  {%- endif -%}
    <fieldset class="checkboxes">
        {%- for tags, category in choices -%}
            <div data-module="toggle-section">
            <div class="flex-between border-1" toggle-section-on-click style="padding: 6px 12px">
                <h3 class="m-0" style="font-size: 14px; font-weight: bold;">
                    {{ h.benap_scheming_language_text(category, lang) }}
                </h3>
                <div toggle-section-target style="padding: 4px; font-size: 10px;">
                  <span class="caret"></span>
                </div>
                <div toggle-section-target class="hide-control" style="padding-right: 4px; font-size: 10px;">
                  <span class="dropup">
                    <span class="caret"></span>
                  </span> 
                </div>
            </div>
            <div toggle-section-target class="hide-control border-1 pl-12 transport-mode-collapse-content" >
                {%- for val, label in tags -%}
                    <label for="field-{{ field.field_name }}-{{ val }}">
                        <input id="field-{{ field.field_name }}-{{ val }}"
                            type="checkbox"
                            value="{{ val }}"
                            data-module="form-tags"
                            data-module-data-field-id="field-{{ field.field_name }}"
                            data-module-val="{{ val }}"
                            {{ "checked " if val in data[field.field_name] }} />
                        {{ h.benap_scheming_language_text(label, lang) }}
                    </label>
                {%- endfor -%}
            </div>
            </div>
        {%- endfor -%}

    </fieldset>
    {%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
{%- endcall -%}
