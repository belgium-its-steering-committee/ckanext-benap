{% import 'macros/form.html' as form %}

<fieldset style="border: 1px solid #ccc; padding: 20px; margin-bottom: 40px;">
    <legend style="font-weight: bold; margin-bottom: -5px;">
        <label style="display: inline-block; width: 120px;">
            <span style="color: rgb(198,137,139);">*</span> {{ h.scheming_language_text(field.label) }}</label>
            {%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
    </legend>
    {%- set schema_fields = c.scheming_fields if c.scheming_fields else h.scheming_get_dataset_schema('dataset').dataset_fields -%}
    {% for item in field.nested_fields %}
        {% set field = schema_fields | selectattr('field_name', 'equalto', item.field_name) | first %}
        <div style="margin-bottom: -20px;">
            {% call form.input(
                field.field_name,
                id='field-' + field.field_name,
                label=h.scheming_language_text(field.label),
                placeholder=h.scheming_language_text(field.form_placeholder),
                value=data[field.field_name],
                error=errors[field.field_name],
                classes=field.classes if 'classes' in field else ['control-medium'],
                attrs=dict({"class": "form-control"}, **(field.get('form_attrs', {}))),
                is_required=h.scheming_field_required(field)
                )
            %}
                {%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
            {% endcall %}
        </div>
    {% endfor %}
</fieldset>
<div
    data-module="contact-point-autocomplete"
    data-module-autocomplete_options='{{ h.benap_organisation_names_for_autocomplete() | tojson }}'
    data-module-organizations='{{ h.benap_retrieve_org_title_tel_email() | tojson }}'>
</div>